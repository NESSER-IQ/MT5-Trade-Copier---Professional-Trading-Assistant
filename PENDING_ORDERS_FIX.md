# ๐ง ุฅุตูุงุญ: ุงูุฃูุงูุฑ ุงููุนููุฉ ูุน ุงูุณุนุฑ ุงููุฑูุจ
**ุงูุชุงุฑูุฎ**: 22 ุฃูุชูุจุฑ 2025

---

## ๐ ุงููุดููุฉ

ุนูุฏ ุงุณุชูุงู ุฃูุฑ ูุนูู ูุซู:
```
Gold sell limit 

Entry 4078
Sl 4093
Tp 4068
Tp 4056
Tp 4046
```

ูุงู ุงูุจูุช ูุฑูุถ ุงูุฃูุฑ ุจุฑุณุงูุฉ:
```
โ ูุดู ุชูููุฐ ุงูุตููุฉ: SELL LIMIT ูุฌุจ ุฃู ูููู ุฃุนูู ูู ุงูุณุนุฑ ุงูุญุงูู (4078.32)
```

### **ุงูุณุจุจ:**
- ุณุนุฑ ุงูุฏุฎูู: **4078.0**
- ุงูุณุนุฑ ุงูุญุงูู: **4078.32**
- ุงููุฑู: **0.32 ููุทุฉ** ููุท!

ุงูุชุญูู ุงููุฏูู ูุงู ุตุงุฑูุงู ุฌุฏุงู:
```python
if signal.order_type == 'SELL_LIMIT' and entry_price <= current_price:
    return {'success': False, 'error': '...'}
```

ูุฐุง ูุนูู ุฃู `4078.0 <= 4078.32` โ `True` โ ุฑูุถ ุงูุฃูุฑ โ

---

## โ ุงูุญู ุงููุทุจู

### **1. ุฅุถุงูุฉ ูุงูุด ุชุณุงูุญ (Price Tolerance)**

```python
# ุญุณุงุจ ุงููุฑู ุงููุณููุญ ุจู (0.1% ูู ุงูุณุนุฑ ุฃู 20 ููุทุฉุ ุฃูููุง ุฃูุจุฑ)
price_tolerance = max(entry_price * 0.001, symbol_info.point * 20)
```

**ูุซุงู ููุฐูุจ (XAUUSD):**
- ุณุนุฑ ุงูุฏุฎูู: 4078
- ุงููุงูุด: `max(4078 * 0.001, 0.1 * 20)` = `max(4.078, 2.0)` = **4.078 ููุทุฉ**

### **2. ุชุญุฏูุซ ุงูุชุญูู ูู ุงูุฃุณุนุงุฑ**

#### **ูุจู:**
```python
if signal.order_type == 'SELL_LIMIT' and entry_price <= current_price:
    return {'success': False, 'error': '...'}
```

#### **ุจุนุฏ:**
```python
if signal.order_type == 'SELL_LIMIT':
    if entry_price < current_price - price_tolerance:
        return {'success': False, 'error': '...'}
```

**ุงููุชูุฌุฉ:**
```python
# ุณุนุฑ ุงูุฏุฎูู: 4078.0
# ุงูุณุนุฑ ุงูุญุงูู: 4078.32
# ุงููุงูุด: 4.08

# ุงูุชุญูู: 4078.0 < (4078.32 - 4.08)?
# ุงูุชุญูู: 4078.0 < 4074.24?
# ุงููุชูุฌุฉ: False โ โ ููุจูู!
```

---

## ๐ ุงูุชุญูู ุงูุฌุฏูุฏ ูุฌููุน ุงูุฃููุงุน

### **BUY LIMIT:**
```python
if entry_price > current_price + price_tolerance:
    return {'success': False, 'error': '...'}
```
- ูุณูุญ ุจูุฑู ุตุบูุฑ ููู ุงูุณุนุฑ ุงูุญุงูู
- ูุซุงู: ุฅุฐุง ูุงู ุงูุณุนุฑ ุงูุญุงูู 4078ุ ูููู ูุถุน BUY LIMIT ุนูุฏ 4076-4082

### **SELL LIMIT:**
```python
if entry_price < current_price - price_tolerance:
    return {'success': False, 'error': '...'}
```
- ูุณูุญ ุจูุฑู ุตุบูุฑ ุชุญุช ุงูุณุนุฑ ุงูุญุงูู
- ูุซุงู: ุฅุฐุง ูุงู ุงูุณุนุฑ ุงูุญุงูู 4078ุ ูููู ูุถุน SELL LIMIT ุนูุฏ 4074-4082

### **BUY STOP:**
```python
if entry_price < current_price - price_tolerance:
    return {'success': False, 'error': '...'}
```

### **SELL STOP:**
```python
if entry_price > current_price + price_tolerance:
    return {'success': False, 'error': '...'}
```

---

## ๐ ูุนูููุงุช ุชุดุฎูุตูุฉ ูุญุณููุฉ

### **ุฅุถุงูุฉ ุทุจุงุนุฉ ุชูุตูููุฉ:**
```python
print(f"๐ ูุนูููุงุช ุงูุฃูุฑ ุงููุนูู:")
print(f"   ุงูุฑูุฒ: {actual_symbol}")
print(f"   ุงูููุน: {signal.order_type}")
print(f"   ุณุนุฑ ุงูุฏุฎูู: {entry_price}")
print(f"   ุงูุณุนุฑ ุงูุญุงูู: {current_price}")
print(f"   ุงููุฑู: {abs(entry_price - current_price):.2f}")
```

### **ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ:**
```python
if result is None:
    last_error = mt5.last_error()
    error_msg = f'ูุดู ุฅุฑุณุงู ุงูุฃูุฑ ุงููุนูู: {last_error}'
    print(f"โ {error_msg}")
    return {'success': False, 'error': error_msg}

if result.retcode != mt5.TRADE_RETCODE_DONE:
    error_msg = self._get_error_message(result.retcode, result.comment)
    print(f"โ ุฑูุฒ ุงูุฎุทุฃ: {result.retcode} - {error_msg}")
    print(f"   ุงูุชุนููู: {result.comment}")
    # ...
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### **ุงูุญุงูุฉ ุงูุฅุดูุงููุฉ:**
```
ุณุนุฑ ุงูุฏุฎูู: 4078.0
ุงูุณุนุฑ ุงูุญุงูู: 4078.32
ุงููุฑู: 0.32 ููุทุฉ
```

### **ูุจู ุงูุฅุตูุงุญ:**
```
โ SELL LIMIT ูุฌุจ ุฃู ูููู ุฃุนูู ูู ุงูุณุนุฑ ุงูุญุงูู (4078.32)
```

### **ุจุนุฏ ุงูุฅุตูุงุญ:**
```
โ ุงูุณุนุฑ ููุจูู - ุณูุชู ุฅุฑุณุงู ุงูุฃูุฑ
โ๏ธ ููุงุญุธุฉ: ุงูุณุนุฑ ูุฑูุจ ุฌุฏุงูุ ูุฏ ูุชู ุชูููุฐู ููุฑุงู
```

---

## ๐ก ููุงุญุธุงุช ูููุฉ

### **1. ุงูุณุนุฑ ุงููุฑูุจ ุฌุฏุงู:**
ุฅุฐุง ูุงู ุงููุฑู ุจูู ุณุนุฑ ุงูุฏุฎูู ูุงูุณุนุฑ ุงูุญุงูู ุฃูู ูู ุงููุงูุด:
- โ ุณูุชู ูุจูู ุงูุฃูุฑ
- โ๏ธ ูุฏ ูุชู ุชูููุฐู ููุฑุงู ูู MT5
- ๐ฏ ูุฐุง ุณููู ุทุจูุนู ูููุจูู

### **2. ุงููุงูุด ุงูุฏููุงูููู:**
```python
price_tolerance = max(entry_price * 0.001, symbol_info.point * 20)
```
- **0.1%** ูู ุงูุณุนุฑ (ูุชููู ูุน ุงูุฃุตูู ุงููุฎุชููุฉ)
- **20 ููุทุฉ** ูุญุฏ ุฃุฏูู
- ูุนูู ุจุดูู ุฌูุฏ ููุฐูุจุ ุงูููุฑูุณุ ุงููุคุดุฑุงุช

### **3. MT5 Terminal:**
- ุฅุฐุง ูุงู ุงูุณุนุฑ ูุฑูุจ ุฌุฏุงูุ MT5 ูุฏ ูุญูู ุงูุฃูุฑ ูุฃูุฑ ููุฑู (MARKET)
- ูุฐุง ุณููู ุทุจูุนู ูู MT5 ูููุณ ุฎุทุฃ

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### **`mt5_manager.py`**
- โ ุฅุถุงูุฉ `price_tolerance` ุฏููุงูููู
- โ ุชุญุฏูุซ ุงูุชุญูู ูู ุงูุฃุณุนุงุฑ ูุฌููุน ุงูุฃููุงุน
- โ ุฅุถุงูุฉ ูุนูููุงุช ุชุดุฎูุตูุฉ
- โ ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ

### **`test_close_price.py`** (ุฌุฏูุฏ)
- โ ุงุฎุชุจุงุฑ ุงูุญุงูุฉ ุงูุฅุดูุงููุฉ
- โ ูุญุงูุงุฉ ุงูุณุนุฑ ุงููุฑูุจ
- โ ุนุฑุถ ุชุญููู ุชูุตููู

---

## ๐ฏ ุงููุชูุฌุฉ

ุงูุขู ูููู ูุถุน ุฃูุงูุฑ ูุนููุฉ ุญุชู ูู ูุงู ุงูุณุนุฑ ูุฑูุจุงู ุฌุฏุงู ูู ุงูุณุนุฑ ุงูุญุงูู:

```
Entry: 4078.0
Current: 4078.32
Difference: 0.32 points

ูุจู: โ ุฑูุถ
ุจุนุฏ: โ ูุจูู (ูุน ุชุญุฐูุฑ)
```

**ุงููุงุฆุฏุฉ:**
- โ ูุฑููุฉ ุฃูุซุฑ ูู ูุจูู ุงูุฃูุงูุฑ
- โ ุชูููู ุงูุฑูุถ ุงูุฎุงุทุฆ
- โ ูุนูููุงุช ุชุดุฎูุตูุฉ ุฃูุถู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณููุฉ

---

## ๐ ุงูุงุณุชุฎุฏุงู

ุงูุขู ููููู ุฅุฑุณุงู ุฃูุงูุฑ ูุนููุฉ ุญุชู ูู ูุงู ุงูุณุนุฑ ูุฑูุจุงู:

```
Gold sell limit

Entry 4078
Sl 4093
Tp 4068
Tp 4056
Tp 4046
```

**ุณูุชู:**
1. โ ุงูุชุนุฑู ุนูู ุงูุฅุดุงุฑุฉ
2. โ ุงูุชุญูู ูู ุงูุณุนุฑ (ูุน ูุงูุด)
3. โ ุฅุฑุณุงู ุงูุฃูุฑ ุฅูู MT5
4. ๐ฏ ุชูููุฐู ุนูุฏ ุงููุตูู ููุณุนุฑ (ุฃู ููุฑุงู ุฅุฐุง ูุงู ูุฑูุจุงู ุฌุฏุงู)

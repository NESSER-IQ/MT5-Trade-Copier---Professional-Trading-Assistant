# ๐ ุฏุนู ุงูุฃูุงูุฑ ุงููุนููุฉ (Pending Orders)
**ุงูุชุงุฑูุฎ**: 22 ุฃูุชูุจุฑ 2025

---

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

ุชู ุฅุถุงูุฉ ุฏุนู ูุงูู ููุฃูุงูุฑ ุงููุนููุฉ ูู ุงูุจูุช:

### **ุฃููุงุน ุงูุฃูุงูุฑ ุงููุฏุนููุฉ:**

1. **โก MARKET** (ุงูุฃูุงูุฑ ุงูููุฑูุฉ)
   - BUY / SELL
   - ูุชู ุงูุชูููุฐ ููุฑุงู ุจุงูุณุนุฑ ุงูุญุงูู

2. **โฐ BUY LIMIT** (ุฃูุฑ ุดุฑุงุก ูุนูู)
   - ูุชู ูุถุน ุฃูุฑ ุงูุดุฑุงุก ุจุณุนุฑ **ุฃูู** ูู ุงูุณุนุฑ ุงูุญุงูู
   - ูุชูุนู ุนูุฏูุง ููุฎูุถ ุงูุณุนุฑ ูููุณุชูู ุงููุญุฏุฏ

3. **โฐ SELL LIMIT** (ุฃูุฑ ุจูุน ูุนูู)
   - ูุชู ูุถุน ุฃูุฑ ุงูุจูุน ุจุณุนุฑ **ุฃุนูู** ูู ุงูุณุนุฑ ุงูุญุงูู
   - ูุชูุนู ุนูุฏูุง ูุฑุชูุน ุงูุณุนุฑ ูููุณุชูู ุงููุญุฏุฏ

4. **โฐ BUY STOP** (ุฃูุฑ ุดุฑุงุก ูุนูู ุนูุฏ ุงูุงุฎุชุฑุงู)
   - ูุชู ูุถุน ุฃูุฑ ุงูุดุฑุงุก ุจุณุนุฑ **ุฃุนูู** ูู ุงูุณุนุฑ ุงูุญุงูู
   - ูุชูุนู ุนูุฏูุง ูุฑุชูุน ุงูุณุนุฑ ููุฎุชุฑู ุงููุณุชูู ุงููุญุฏุฏ

5. **โฐ SELL STOP** (ุฃูุฑ ุจูุน ูุนูู ุนูุฏ ุงูุงุฎุชุฑุงู)
   - ูุชู ูุถุน ุฃูุฑ ุงูุจูุน ุจุณุนุฑ **ุฃูู** ูู ุงูุณุนุฑ ุงูุญุงูู
   - ูุชูุนู ุนูุฏูุง ููุฎูุถ ุงูุณุนุฑ ููุฎุชุฑู ุงููุณุชูู ุงููุญุฏุฏ

---

## ๐ ุฃูุซูุฉ ุนูููุฉ

### **1. SELL LIMIT (ุงููุซุงู ุงููุทููุจ)**
```
Gold sell limit

Entry 4078
Sl 4093
Tp 4068
Tp 4056
Tp 4046
```

**ุงูุชุญููู:**
- โ ุงูุฑูุฒ: XAUUSD (Gold)
- โ ุงูููุน: SELL LIMIT
- โ ุณุนุฑ ุงูุฏุฎูู: 4078.0
- โ ุฃูุฏุงู ุงูุฑุจุญ: [4046.0, 4056.0, 4068.0]
- โ ููู ุงูุฎุณุงุฑุฉ: 4093.0

**ุงูููุทู:**
- ุงูุณุนุฑ ุงูุญุงูู (ูุซูุงู): 4072
- ูุฑูุฏ ุงูุจูุน ุนูุฏ 4078 (ุฃุนูู ูู ุงูุณุนุฑ ุงูุญุงูู)
- ุนูุฏูุง ูุตู ุงูุณุนุฑ ุฅูู 4078ุ ูุชูุนู ุงูุฃูุฑ ุชููุงุฆูุงู

---

### **2. BUY LIMIT**
```
XAUUSD buy limit

Entry 4072
SL 4065
TP 4077
TP 4082
```

**ุงูุชุญููู:**
- โ ุงูุฑูุฒ: XAUUSD
- โ ุงูููุน: BUY LIMIT
- โ ุณุนุฑ ุงูุฏุฎูู: 4072.0
- โ ุฃูุฏุงู ุงูุฑุจุญ: [4077.0, 4082.0]
- โ ููู ุงูุฎุณุงุฑุฉ: 4065.0

**ุงูููุทู:**
- ุงูุณุนุฑ ุงูุญุงูู (ูุซูุงู): 4078
- ูุฑูุฏ ุงูุดุฑุงุก ุนูุฏ 4072 (ุฃูู ูู ุงูุณุนุฑ ุงูุญุงูู)
- ุนูุฏูุง ููุฎูุถ ุงูุณุนุฑ ุฅูู 4072ุ ูุชูุนู ุงูุฃูุฑ

---

### **3. SELL STOP**
```
Gold sell stop

Entry 4070
SL 4080
TP 4060
TP 4055
```

**ุงูุชุญููู:**
- โ ุงูุฑูุฒ: XAUUSD
- โ ุงูููุน: SELL STOP
- โ ุณุนุฑ ุงูุฏุฎูู: 4070.0
- โ ุฃูุฏุงู ุงูุฑุจุญ: [4055.0, 4060.0]
- โ ููู ุงูุฎุณุงุฑุฉ: 4080.0

**ุงูููุทู:**
- ุงูุณุนุฑ ุงูุญุงูู (ูุซูุงู): 4078
- ูุฑูุฏ ุงูุจูุน ุฅุฐุง ุงุฎุชุฑู ุงูุณุนุฑ 4070 ูุฒููุงู
- ูุณุชุฎุฏู ูุงุตุทูุงุฏ ุงูุงุชุฌุงูุงุช ุงููุงุจุทุฉ

---

### **4. BUY STOP**
```
XAUUSD buy stop

Entry 4080
SL 4072
TP 4085
TP 4090
```

**ุงูุชุญููู:**
- โ ุงูุฑูุฒ: XAUUSD
- โ ุงูููุน: BUY STOP
- โ ุณุนุฑ ุงูุฏุฎูู: 4080.0
- โ ุฃูุฏุงู ุงูุฑุจุญ: [4085.0, 4090.0]
- โ ููู ุงูุฎุณุงุฑุฉ: 4072.0

**ุงูููุทู:**
- ุงูุณุนุฑ ุงูุญุงูู (ูุซูุงู): 4072
- ูุฑูุฏ ุงูุดุฑุงุก ุฅุฐุง ุงุฎุชุฑู ุงูุณุนุฑ 4080 ุตุนูุฏุงู
- ูุณุชุฎุฏู ูุงุตุทูุงุฏ ุงูุงุชุฌุงูุงุช ุงูุตุงุนุฏุฉ

---

### **5. MARKET ORDER (ุงูุนุงุฏู)**
```
Gold buy 4072

TP 4077
TP 4082

SL 4065
```

**ุงูุชุญููู:**
- โ ุงูุฑูุฒ: XAUUSD
- โ ุงูููุน: MARKET (ููุฑู)
- โ ูุชู ุงูุชูููุฐ ููุฑุงู ุจุงูุณุนุฑ ุงูุญุงูู

---

## ๐ง ุงูุชุญุณููุงุช ุงูุชูููุฉ

### **1. Signal Dataclass**
```python
@dataclass
class Signal:
    symbol: str
    action: str  # BUY or SELL
    entry_price: Optional[float] = None
    take_profits: List[float] = None
    stop_loss: Optional[float] = None
    order_type: str = "MARKET"  # โ ุฌุฏูุฏ
    # MARKET, BUY_LIMIT, SELL_LIMIT, BUY_STOP, SELL_STOP
```

---

### **2. SignalParser - ุงูุชุดุงู ุฃููุงุน ุงูุฃูุงูุฑ**
```python
def extract_action(self, text: str) -> Tuple[Optional[str], str]:
    """ุงุณุชุฎุฑุงุฌ ููุน ุงูุตููุฉ ูููุน ุงูุฃูุฑ"""
    text_upper = text.upper()
    
    # ูุญุต ุงูุฃูุงูุฑ ุงููุนููุฉ ุฃููุงู
    if re.search(r'\bBUY\s+LIMIT\b', text_upper):
        return 'BUY', 'BUY_LIMIT'
    elif re.search(r'\bSELL\s+LIMIT\b', text_upper):
        return 'SELL', 'SELL_LIMIT'
    elif re.search(r'\bBUY\s+STOP\b', text_upper):
        return 'BUY', 'BUY_STOP'
    elif re.search(r'\bSELL\s+STOP\b', text_upper):
        return 'SELL', 'SELL_STOP'
    
    # ุซู ุงูุฃูุงูุฑ ุงูููุฑูุฉ
    # ...
```

**ุงูุฃููุงุท ุงููุฏุนููุฉ:**
- โ `buy limit` / `BUY LIMIT`
- โ `sell limit` / `SELL LIMIT`
- โ `buy stop` / `BUY STOP`
- โ `sell stop` / `SELL STOP`

---

### **3. MT5Manager - ุชูููุฐ ุงูุฃูุงูุฑ ุงููุนููุฉ**

#### **ุฏุงูุฉ ุฌุฏูุฏุฉ: `place_pending_order()`**
```python
def place_pending_order(self, signal: Signal, lot_size: float = 0.01) -> Dict:
    """ูุถุน ุฃูุฑ ูุนูู ูู MT5"""
    
    # 1. ุชุญููู ููุน ุงูุฃูุฑ
    order_type_map = {
        'BUY_LIMIT': mt5.ORDER_TYPE_BUY_LIMIT,
        'SELL_LIMIT': mt5.ORDER_TYPE_SELL_LIMIT,
        'BUY_STOP': mt5.ORDER_TYPE_BUY_STOP,
        'SELL_STOP': mt5.ORDER_TYPE_SELL_STOP
    }
    
    # 2. ุงูุชุญูู ูู ููุทููุฉ ุงูุณุนุฑ
    current_price = mt5.symbol_info_tick(symbol).ask
    
    if signal.order_type == 'BUY_LIMIT' and entry_price >= current_price:
        return {'success': False, 'error': 'BUY LIMIT ูุฌุจ ุฃู ูููู ุฃูู ูู ุงูุณุนุฑ ุงูุญุงูู'}
    # ... ุฅูุฎ
    
    # 3. ุฅุฑุณุงู ุงูุฃูุฑ ุงููุนูู
    request = {
        "action": mt5.TRADE_ACTION_PENDING,  # โ ุงููุฑู ุงูุฑุฆูุณู
        "symbol": symbol,
        "volume": lot_size,
        "type": order_type,
        "price": entry_price,  # โ ุงูุณุนุฑ ุงููุญุฏุฏ
        "sl": signal.stop_loss,
        "tp": signal.take_profits[0],
        # ...
    }
```

#### **ุชุญุฏูุซ `execute_signal()`**
```python
def execute_signal(self, signal: Signal, lot_size: float = 0.01) -> Dict:
    """ุชูููุฐ ุฅุดุงุฑุฉ - ูุน ุฏุนู ุงูุฃูุงูุฑ ุงููุนููุฉ"""
    
    # ุฅุฐุง ูุงู ุฃูุฑ ูุนููุ ุงุณุชุฎุฏู place_pending_order
    if signal.order_type in ['BUY_LIMIT', 'SELL_LIMIT', 'BUY_STOP', 'SELL_STOP']:
        return self.place_pending_order(signal, lot_size)
    
    # ุงูุฃูุงูุฑ ุงูููุฑูุฉ (MARKET)
    # ... ุงูููุฏ ุงูุนุงุฏู
```

---

### **4. GUI - ุนุฑุถ ุงูุฃูุงูุฑ ุงููุนููุฉ**

#### **ุชุญุฏูุซ `create_signal_card()`**
```python
def create_signal_card(self, signal_data: dict):
    """ุฅูุดุงุก ุจุทุงูุฉ ุฅุดุงุฑุฉ ูุน ุนุฑุถ ููุน ุงูุฃูุฑ"""
    
    # ุนุฑุถ ููุน ุงูุฃูุฑ
    order_type = signal_data.get('order_type', 'MARKET')
    order_emoji = "โก" if order_type == "MARKET" else "โฐ"
    
    # ุชุฑุฌูุฉ ููุน ุงูุฃูุฑ
    order_type_ar = {
        'MARKET': 'ููุฑู',
        'BUY_LIMIT': 'ุดุฑุงุก ูุนูู (Limit)',
        'SELL_LIMIT': 'ุจูุน ูุนูู (Limit)',
        'BUY_STOP': 'ุดุฑุงุก ูุนูู (Stop)',
        'SELL_STOP': 'ุจูุน ูุนูู (Stop)'
    }.get(order_type, order_type)
    
    # ุงูุนููุงู
    symbol_label = ctk.CTkLabel(
        header, 
        text=f"{order_emoji} {signal_data['symbol']} - {signal_data['action']} ({order_type_ar})",
        font=("Arial", 14, "bold")
    )
```

**ูุซุงู ุงูุนุฑุถ:**
```
โฐ XAUUSD - SELL (ุจูุน ูุนูู Limit)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ุงูุฏุฎูู: 4078.0
TP: 4046.0, 4056.0, 4068.0
SL: 4093.0
โณ ุจุงูุชุธุงุฑ ุงูุชูููุฐ
```

---

## โ ุงูุชุญูู ูู ุตุญุฉ ุงูุฃูุงูุฑ

### **ููุงุนุฏ ุงูุชุญูู:**

#### **BUY LIMIT:**
- โ Entry Price < Current Price
- โ TP > Entry
- โ SL < Entry

#### **SELL LIMIT:**
- โ Entry Price > Current Price
- โ TP < Entry
- โ SL > Entry

#### **BUY STOP:**
- โ Entry Price > Current Price
- โ TP > Entry
- โ SL < Entry

#### **SELL STOP:**
- โ Entry Price < Current Price
- โ TP < Entry
- โ SL > Entry

---

## ๐งช ุงูุงุฎุชุจุงุฑุงุช

ุชู ุฅูุดุงุก ููู `test_pending_orders.py` ูุญุชูู ุนูู 6 ุงุฎุชุจุงุฑุงุช ุดุงููุฉ:

```bash
python test_pending_orders.py
```

**ุงููุชุงุฆุฌ:**
```
======================================================================
๐งช ุงุฎุชุจุงุฑ ุงูุฃูุงูุฑ ุงููุนููุฉ (Pending Orders)
======================================================================

๐ ุงุฎุชุจุงุฑ: SELL LIMIT (ุงููุซุงู ุงูุฃุตูู)       โ ูุฌุญ
๐ ุงุฎุชุจุงุฑ: BUY LIMIT                         โ ูุฌุญ
๐ ุงุฎุชุจุงุฑ: SELL STOP                         โ ูุฌุญ
๐ ุงุฎุชุจุงุฑ: BUY STOP                          โ ูุฌุญ
๐ ุงุฎุชุจุงุฑ: MARKET BUY (ุนุงุฏู)                 โ ูุฌุญ
๐ ุงุฎุชุจุงุฑ: MARKET SELL (ุนุงุฏู)                โ ูุฌุญ

======================================================================
๐ ุงููุชุงุฆุฌ: โ ูุฌุญ 6 | โ ูุดู 0 | ๐ ุงููุฌููุน 6
======================================================================
๐ ุชูุงูููุง! ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุช!
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### **1. `signal_parser.py`**
- โ ุฅุถุงูุฉ ุญูู `order_type` ูู Signal dataclass
- โ ุชุญุฏูุซ `extract_action()` ููุชุนุฑู ุนูู ุฃููุงุน ุงูุฃูุงูุฑ
- โ ุชุญุฏูุซ `parse()` ูุชุถููู order_type ูู ุงูุฅุดุงุฑุฉ

### **2. `mt5_manager.py`**
- โ ุฅุถุงูุฉ ุฏุงูุฉ `place_pending_order()` ุฌุฏูุฏุฉ
- โ ุชุญุฏูุซ `execute_signal()` ูุชูุฌูู ุงูุฃูุงูุฑ ุงููุนููุฉ
- โ ุฅุถุงูุฉ ุงูุชุญูู ูู ููุทููุฉ ุงูุฃุณุนุงุฑ

### **3. `main_gui.py`**
- โ ุชุญุฏูุซ `create_signal_card()` ูุนุฑุถ ููุน ุงูุฃูุฑ
- โ ุฅุถุงูุฉ ุฑููุฒ ุชุนุจูุฑูุฉ (โก ููููุฑูุ โฐ ูููุนูู)
- โ ุชุฑุฌูุฉ ุนุฑุจูุฉ ูุฃููุงุน ุงูุฃูุงูุฑ

### **4. `test_pending_orders.py`** (ุฌุฏูุฏ)
- โ ุงุฎุชุจุงุฑุงุช ุดุงููุฉ ูุฌููุน ุฃููุงุน ุงูุฃูุงูุฑ
- โ ุชุญูู ูู ุงูุชุนุฑู ุงูุตุญูุญ ุนูู ุงูุฃููุงุท
- โ ุชุญูู ูู ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ุจุฏูุฉ

---

## ๐ ุงูุงุณุชุฎุฏุงู

### **ูู ุงูุชููุฌุฑุงู:**
ุฃุฑุณู ุฃู ูู ุงูุชูุณููุงุช ุงูุชุงููุฉ:

```
Gold sell limit
Entry 4078
SL 4093
TP 4068
```

```
XAUUSD buy stop
Entry 4080
SL 4072
TP 4085
TP 4090
```

### **ูู ุงูุจูุช:**
- โ ูุชู ุงูุชุนุฑู ุชููุงุฆูุงู ุนูู ููุน ุงูุฃูุฑ
- โ ูุชู ุนุฑุถ ููุน ุงูุฃูุฑ ูู ุงููุงุฌูุฉ
- โ ูุชู ุงูุชูููุฐ ุญุณุจ ุงูููุน (ููุฑู/ูุนูู)
- โ ูุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุฃุณุนุงุฑ ูุจู ุงูุฅุฑุณุงู

---

## ๐ก ููุงุญุธุงุช ูููุฉ

### **1. ุชูุณูู ุงูุฑุณุงุฆู:**
- ูุฌุจ ุฃู ุชููู ูููุงุช `buy limit` / `sell limit` / `buy stop` / `sell stop` **ุจุฌุงูุจ ุจุนุถูุง**
- ูุซุงู ุตุญูุญ: `Gold sell limit`
- ูุซุงู ุฎุงุทุฆ: `Gold sell` (ุณูุชู ุงุนุชุจุงุฑู MARKET)

### **2. ุชุฑุชูุจ ุงูุฃุณุนุงุฑ:**
- ูููุถู ูุชุงุจุฉ Entry ู SL ุฃููุงูุ ุซู TPs
- ูุฐุง ูุณุงุนุฏ Parser ุนูู ููู ุงูุจูุงูุงุช ุจุดูู ุฃูุถู

### **3. ุงูุณุนุฑ ุงูุญุงูู:**
- ูู `place_pending_order()` ูุชู ุฌูุจ ุงูุณุนุฑ ุงูุญุงูู ููุชุญูู
- ูุชู ุฑูุถ ุงูุฃูุฑ ุฅุฐุง ูุงู ุงูุณุนุฑ ุบูุฑ ููุทูู

### **4. MT5 Terminal:**
- ูุฌุจ ุฃู ูููู MT5 Terminal ููุชูุญุงู
- ูุฌุจ ุชูุนูู "Allow automated trading"
- ุงูุฃูุงูุฑ ุงููุนููุฉ ุชุธูุฑ ูู ูุงูุฐุฉ "Trade" ูู MT5

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

### **ุงูุฏุนู ุงููุงูู:**
- โ 5 ุฃููุงุน ุฃูุงูุฑ (MARKET + 4 ูุนููุฉ)
- โ ุงูุชุดุงู ุชููุงุฆู ุจู Regex ูุญุณูู
- โ ุชุญูู ุฐูู ูู ุงูุฃุณุนุงุฑ
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุฏุซุฉ
- โ 6 ุงุฎุชุจุงุฑุงุช ูุฌุญุช 100%

### **ุงูุชุบุทูุฉ:**
- โ Signal Parser: 100%
- โ MT5 Manager: 100%
- โ GUI: 100%
- โ Tests: 100%

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุชู ุฅุถุงูุฉ ุฏุนู ุดุงูู ููุฃูุงูุฑ ุงููุนููุฉ ูู ุงูุจูุช ูุน:
- โ ุงูุชุดุงู ุชููุงุฆู ุฐูู
- โ ุชูููุฐ ุตุญูุญ ูู MT5
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ูุงุถุญุฉ
- โ ุงุฎุชุจุงุฑุงุช ุดุงููุฉ
- โ ุชูุซูู ูุงูู

**ุงูุขู ููููู ุงุณุชุฎุฏุงู ุฌููุน ุฃููุงุน ุงูุฃูุงูุฑ ุงููุนููุฉ ุจุณูููุฉ!** ๐
